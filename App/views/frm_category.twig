{% extends path_user_template ~ '/home.twig' %}

{% block title %}
    {{ page_title|default('ArtCMS :: Add article') }}
{% endblock %}

{% block headtags %}
    <script src="{{ path_url }}{{ user_var.project_static }}/jquery.validate.min.js" type="text/javascript"></script>
    <script src="{{ path_url }}/vendor/tinymce/tinymce/tinymce.jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            if($("#errors").html() == '') {
                $("#errors").hide();
            }

            tinymce.init({
                selector:'#editorbody',
                plugins: [
                    'advlist autolink lists link image charmap print preview anchor',
                    'searchreplace visualblocks code fullscreen',
                    'insertdatetime media table contextmenu paste code'
                ],
                toolbar: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image'
            });
        });
    </script>
{% endblock %}

{% block contentbody %}
    {% if session.get('user_info').utype == 1 %}
        {{ parent() }}
        {{ body_content }}

        <form class="pure-form" style="width: 1024px;" id="publish" method="post" action="{{ path_url_postfix }}/category/add/">
            <fieldset>
                <input type="text" class="pure-input-1-2" placeholder="Category name" name="catname" />
            </fieldset>

            <input type="submit" class="pure-button pure-input-1-2 pure-button-primary" id="btn_submit" value="Submit"  />
        </form>

        <script type="text/javascript">
            $(document).ready(function(){
                $("#publish").validate({
                    rules:{
                        catname:{ required: true , maxlength: 100 },
                    },
                    messages:{
                        catname: {
                            required: "Enter category name.",
                            maxlength: "Can't be longer than 100 characters."
                        }
                    }
                });
            });
        </script>

<div class="pure-menu custom-restricted-width">
    <ul class="pure-menu-list">
        {% for cat in categories %}
            <li class="pure-menu-item">{{ cat.catname }}</li>
        {% endfor %}
    </ul>
</div>

    {% endif %}
{% endblock %}

